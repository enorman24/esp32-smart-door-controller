<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: follower.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('follower_8ino.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">follower.ino File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Follower ESP32 smart door controller.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;Wire.h&gt;</code><br />
<code>#include &lt;ESP32Servo.h&gt;</code><br />
<code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5218f89aa292654356a48989319aafb1" id="r_a5218f89aa292654356a48989319aafb1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5218f89aa292654356a48989319aafb1">SERVO_PIN</a>&#160;&#160;&#160;18</td></tr>
<tr class="memitem:a386bd5a6168d14ed64af7d5a53d4ce47" id="r_a386bd5a6168d14ed64af7d5a53d4ce47"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a386bd5a6168d14ed64af7d5a53d4ce47">PIR_PIN</a>&#160;&#160;&#160;4</td></tr>
<tr class="memitem:ac9f31f726d2933782e2efda7136a25fd" id="r_ac9f31f726d2933782e2efda7136a25fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9f31f726d2933782e2efda7136a25fd">ADDR</a>&#160;&#160;&#160;8</td></tr>
<tr class="memitem:ab61d0981ed42df9e18211b273d22cfcd" id="r_ab61d0981ed42df9e18211b273d22cfcd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab61d0981ed42df9e18211b273d22cfcd">BUZZER_PIN</a>&#160;&#160;&#160;19</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab795f163f3c34d964365c699990f245f" id="r_ab795f163f3c34d964365c699990f245f"><td class="memItemLeft" align="right" valign="top">void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab795f163f3c34d964365c699990f245f">onTimerDebounce</a> ()</td></tr>
<tr class="memdesc:ab795f163f3c34d964365c699990f245f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debounce timer ISR for the PIR sensor.  <br /></td></tr>
<tr class="memitem:a21959e26b68d77bfbd61f324def02b09" id="r_a21959e26b68d77bfbd61f324def02b09"><td class="memItemLeft" align="right" valign="top">void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21959e26b68d77bfbd61f324def02b09">onPIRChange</a> ()</td></tr>
<tr class="memdesc:a21959e26b68d77bfbd61f324def02b09"><td class="mdescLeft">&#160;</td><td class="mdescRight">PIR GPIO change ISR.  <br /></td></tr>
<tr class="memitem:aa3f69263fdf80b2e25b953ffba8b47d5" id="r_aa3f69263fdf80b2e25b953ffba8b47d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa3f69263fdf80b2e25b953ffba8b47d5">onReceive</a> (int len)</td></tr>
<tr class="memdesc:aa3f69263fdf80b2e25b953ffba8b47d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C receive callback.  <br /></td></tr>
<tr class="memitem:a31014ed15b42420359c1bf640fe06b65" id="r_a31014ed15b42420359c1bf640fe06b65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a31014ed15b42420359c1bf640fe06b65">TaskBuzzer</a> (void *parameter)</td></tr>
<tr class="memdesc:a31014ed15b42420359c1bf640fe06b65"><td class="mdescLeft">&#160;</td><td class="mdescRight">FreeRTOS task that controls the buzzer output.  <br /></td></tr>
<tr class="memitem:afb4f7086b994289c1a126bbaf043d66b" id="r_afb4f7086b994289c1a126bbaf043d66b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb4f7086b994289c1a126bbaf043d66b">TaskController</a> (void *parameter)</td></tr>
<tr class="memdesc:afb4f7086b994289c1a126bbaf043d66b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main controller task for servo and motion-locked behavior.  <br /></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d" id="r_a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino setup function.  <br /></td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f" id="r_afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="memdesc:afe461d27b9c48d5921c00d521181f12f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arduino main loop.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aecf370c8f3e57a71cc82069828b73b71" id="r_aecf370c8f3e57a71cc82069828b73b71"><td class="memItemLeft" align="right" valign="top">Servo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aecf370c8f3e57a71cc82069828b73b71">myServo</a></td></tr>
<tr class="memdesc:aecf370c8f3e57a71cc82069828b73b71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Servo instance that drives the door mechanism.  <br /></td></tr>
<tr class="memitem:a94f75b340e66b364b1cae4a097c802ee" id="r_a94f75b340e66b364b1cae4a097c802ee"><td class="memItemLeft" align="right" valign="top">hw_timer_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a94f75b340e66b364b1cae4a097c802ee">debounceTimer</a> = NULL</td></tr>
<tr class="memdesc:a94f75b340e66b364b1cae4a097c802ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hardware timer used to debounce the PIR motion sensor.  <br /></td></tr>
<tr class="memitem:a30aa7490670cac423953200f8dc8feb1" id="r_a30aa7490670cac423953200f8dc8feb1"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a30aa7490670cac423953200f8dc8feb1">pirState</a> = false</td></tr>
<tr class="memdesc:a30aa7490670cac423953200f8dc8feb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Latched PIR sensor state.  <br /></td></tr>
<tr class="memitem:ac4cdd3c8c5d2f6224e4f13c75b80f433" id="r_ac4cdd3c8c5d2f6224e4f13c75b80f433"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4cdd3c8c5d2f6224e4f13c75b80f433">xI2cQueue</a></td></tr>
<tr class="memdesc:ac4cdd3c8c5d2f6224e4f13c75b80f433"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue for commands received over I2C.  <br /></td></tr>
<tr class="memitem:a7411a8bdb3f26f5811d39c8018f9eb81" id="r_a7411a8bdb3f26f5811d39c8018f9eb81"><td class="memItemLeft" align="right" valign="top">QueueHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7411a8bdb3f26f5811d39c8018f9eb81">xBuzzerQueue</a></td></tr>
<tr class="memdesc:a7411a8bdb3f26f5811d39c8018f9eb81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue used to trigger the buzzer task.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Follower ESP32 smart door controller. </p>
<dl class="section author"><dt>Author</dt><dd>Elliot Norman </dd>
<dd>
Melih Boyun </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-12-02 </dd></dl>
<p>This file implements the "follower" ESP32, which:</p><ul>
<li>Receives lock/unlock commands from the leader over I2C.</li>
<li>Drives a servo to physically open/close the door.</li>
<li>Monitors a PIR motion sensor with hardware-timer-based debouncing.</li>
<li>Triggers a buzzer alarm when motion is detected while locked.</li>
</ul>
<p>All real-time behavior is implemented using FreeRTOS tasks, ISRs, and queues. </p>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ac9f31f726d2933782e2efda7136a25fd" name="ac9f31f726d2933782e2efda7136a25fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f31f726d2933782e2efda7136a25fd">&#9670;&#160;</a></span>ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDR&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab61d0981ed42df9e18211b273d22cfcd" name="ab61d0981ed42df9e18211b273d22cfcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab61d0981ed42df9e18211b273d22cfcd">&#9670;&#160;</a></span>BUZZER_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUZZER_PIN&#160;&#160;&#160;19</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a386bd5a6168d14ed64af7d5a53d4ce47" name="a386bd5a6168d14ed64af7d5a53d4ce47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386bd5a6168d14ed64af7d5a53d4ce47">&#9670;&#160;</a></span>PIR_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIR_PIN&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5218f89aa292654356a48989319aafb1" name="a5218f89aa292654356a48989319aafb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5218f89aa292654356a48989319aafb1">&#9670;&#160;</a></span>SERVO_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_PIN&#160;&#160;&#160;18</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino main loop. </p>
<p>Intentionally empty; all work is handled by FreeRTOS tasks and ISRs. </p>

</div>
</div>
<a id="a21959e26b68d77bfbd61f324def02b09" name="a21959e26b68d77bfbd61f324def02b09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21959e26b68d77bfbd61f324def02b09">&#9670;&#160;</a></span>onPIRChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR onPIRChange </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PIR GPIO change ISR. </p>
<p>Triggered on any change of the PIR input. Instead of reading the pin immediately (which may be noisy), this ISR restarts the debounce timer. The actual sampling of the PIR pin happens in <a class="el" href="#ab795f163f3c34d964365c699990f245f">onTimerDebounce</a>. </p>

</div>
</div>
<a id="aa3f69263fdf80b2e25b953ffba8b47d5" name="aa3f69263fdf80b2e25b953ffba8b47d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3f69263fdf80b2e25b953ffba8b47d5">&#9670;&#160;</a></span>onReceive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void onReceive </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>len</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2C receive callback. </p>
<p>Called by the Wire library when the follower receives data from the leader. It:</p><ul>
<li>Reads incoming bytes as <code>int</code> commands.</li>
<li>Sends each command into <a class="el" href="#ac4cdd3c8c5d2f6224e4f13c75b80f433">xI2cQueue</a> using <code>xQueueSendFromISR</code> so the controller task can handle them in task context.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">len</td><td>Number of bytes available in the receive buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab795f163f3c34d964365c699990f245f" name="ab795f163f3c34d964365c699990f245f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab795f163f3c34d964365c699990f245f">&#9670;&#160;</a></span>onTimerDebounce()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR onTimerDebounce </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Debounce timer ISR for the PIR sensor. </p>
<p>This ISR runs after a short debounce interval and samples the PIR pin. The result is stored in <a class="el" href="#a30aa7490670cac423953200f8dc8feb1">pirState</a>, which is then used by the controller task to decide whether motion is present. </p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arduino setup function. </p>
<p>Initializes:</p><ul>
<li>Serial port for debugging.</li>
<li>I2C in follower mode at address <a class="el" href="#ac9f31f726d2933782e2efda7136a25fd">ADDR</a> and registers <a class="el" href="#aa3f69263fdf80b2e25b953ffba8b47d5">onReceive</a>.</li>
<li>GPIO directions for PIR sensor and buzzer.</li>
<li>Servo attachment and limits.</li>
<li>FreeRTOS queues <a class="el" href="#ac4cdd3c8c5d2f6224e4f13c75b80f433">xI2cQueue</a> and <a class="el" href="#a7411a8bdb3f26f5811d39c8018f9eb81">xBuzzerQueue</a>.</li>
<li>Hardware debounce timer and PIR GPIO interrupt <a class="el" href="#a21959e26b68d77bfbd61f324def02b09">onPIRChange</a>.</li>
<li>FreeRTOS tasks <a class="el" href="#afb4f7086b994289c1a126bbaf043d66b">TaskController</a> and <a class="el" href="#a31014ed15b42420359c1bf640fe06b65">TaskBuzzer</a> pinned to separate cores. </li>
</ul>

</div>
</div>
<a id="a31014ed15b42420359c1bf640fe06b65" name="a31014ed15b42420359c1bf640fe06b65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31014ed15b42420359c1bf640fe06b65">&#9670;&#160;</a></span>TaskBuzzer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TaskBuzzer </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>parameter</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FreeRTOS task that controls the buzzer output. </p>
<p>The task:</p><ul>
<li>Blocks on <a class="el" href="#a7411a8bdb3f26f5811d39c8018f9eb81">xBuzzerQueue</a> waiting for any message.</li>
<li>When a message is received, drives <a class="el" href="#ab61d0981ed42df9e18211b273d22cfcd">BUZZER_PIN</a> high for 1 second.</li>
<li>Turns the buzzer off and waits for the next trigger.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameter</td><td>Unused task parameter (required by FreeRTOS). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afb4f7086b994289c1a126bbaf043d66b" name="afb4f7086b994289c1a126bbaf043d66b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb4f7086b994289c1a126bbaf043d66b">&#9670;&#160;</a></span>TaskController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TaskController </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>parameter</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main controller task for servo and motion-locked behavior. </p>
<p>Responsibilities:</p><ul>
<li>Waits for lock/unlock commands from xI2cQueue:<ul>
<li>command == 1: unlock — sets <code>currentAngle</code> to 360 and writes it to the servo (door open).</li>
<li>any other command: lock request — if <a class="el" href="#a30aa7490670cac423953200f8dc8feb1">pirState</a> is HIGH (motion detected), it:<ul>
<li>sends a trigger to <a class="el" href="#a7411a8bdb3f26f5811d39c8018f9eb81">xBuzzerQueue</a> to sound the alarm.</li>
<li>sets <code>currentAngle</code> to 0 and writes it to the servo (door closed).</li>
</ul>
</li>
</ul>
</li>
<li>Inserts a small periodic delay to yield CPU time.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parameter</td><td>Unused task parameter (required by FreeRTOS). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="a94f75b340e66b364b1cae4a097c802ee" name="a94f75b340e66b364b1cae4a097c802ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94f75b340e66b364b1cae4a097c802ee">&#9670;&#160;</a></span>debounceTimer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hw_timer_t* debounceTimer = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hardware timer used to debounce the PIR motion sensor. </p>

</div>
</div>
<a id="aecf370c8f3e57a71cc82069828b73b71" name="aecf370c8f3e57a71cc82069828b73b71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecf370c8f3e57a71cc82069828b73b71">&#9670;&#160;</a></span>myServo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Servo myServo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Servo instance that drives the door mechanism. </p>

</div>
</div>
<a id="a30aa7490670cac423953200f8dc8feb1" name="a30aa7490670cac423953200f8dc8feb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30aa7490670cac423953200f8dc8feb1">&#9670;&#160;</a></span>pirState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool pirState = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Latched PIR sensor state. </p>
<p>Updated by the debounce timer ISR and consumed by the controller task to decide whether to trigger the buzzer when the door is commanded to lock. </p>

</div>
</div>
<a id="a7411a8bdb3f26f5811d39c8018f9eb81" name="a7411a8bdb3f26f5811d39c8018f9eb81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7411a8bdb3f26f5811d39c8018f9eb81">&#9670;&#160;</a></span>xBuzzerQueue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t xBuzzerQueue</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue used to trigger the buzzer task. </p>
<p>Any value pushed to this queue causes <a class="el" href="#a31014ed15b42420359c1bf640fe06b65">TaskBuzzer</a> to sound the buzzer for a fixed duration. </p>

</div>
</div>
<a id="ac4cdd3c8c5d2f6224e4f13c75b80f433" name="ac4cdd3c8c5d2f6224e4f13c75b80f433"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4cdd3c8c5d2f6224e4f13c75b80f433">&#9670;&#160;</a></span>xI2cQueue</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QueueHandle_t xI2cQueue</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue for commands received over I2C. </p>
<p>Each item is an <code>int</code> command from the leader:</p><ul>
<li>1: unlock (open door / set servo to open position)</li>
<li>other: lock request, which may trigger the buzzer if motion is detected. </li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="follower_8ino.html">follower.ino</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
